<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="description" content="Al Marya Rostery Business Management Portal - Secure coffee business administration">
    <meta name="keywords" content="coffee, business, admin, management, qahwat, emirates">
    <meta name="author" content="Al Marya Rostery">
    <meta name="robots" content="noindex, nofollow">
    <title>Al Marya Rostery - Business Portal</title>
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- Google Identity Services script -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <!-- Main Styles -->
    <link rel="stylesheet" href="admin.css?v=2025101807">
</head>
<body class="login-mode">
    <!-- Login Container -->
    <div id="loginContainer" class="login-container">
        <div class="container">
            <div class="logo">‚òï</div>
            <h1>Al Marya Rostery</h1>
            <p class="subtitle">Business Management Portal</p>
            
            <div class="login-form">
                <form id="adminLoginForm">
                    <div class="form-group">
                        <label for="loginUsername">Username</label>
                        <input type="text" id="loginUsername" name="username" class="form-control" required>
                        <div id="username-error" class="alert alert-error" style="display: none;"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" name="password" class="form-control" required>
                        <div id="password-error" class="alert alert-error" style="display: none;"></div>
                    </div>
                    
                    <button type="submit" id="loginBtn" class="portal-btn">
                        Login to Admin Panel
                    </button>
                    
                    <div id="loginLoading" class="login-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Logging in...</p>
                    </div>
                    
                    <div id="loginError" class="alert alert-error" style="display: none;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="loginErrorMessage">Invalid username or password</span>
                    </div>
                    
                    <div id="loginSuccess" class="alert alert-success" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        Login successful! Redirecting...
                    </div>
                    
                    <div class="forgot-password">
                        <a href="#" id="forgot-password-link">Forgot Password?</a>
                    </div>
                </form>
            </div>
            
            <!-- Development-only credentials display -->
            <div class="login-info" id="devCredentials" style="display:none;">
                <strong>‚ö†Ô∏è Development Mode:</strong><br>
                Username: admin<br>
                Password: almarya2024<br>
                <small style="color: #ff6b6b;">This is only visible in development</small>
            </div>
        </div>
    </div>

    <!-- Admin Layout -->
    <div id="adminLayout" class="admin-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>Almaryah Rostery</h1>
                <p>Business Portal</p>
            </div>
            <nav class="sidebar-menu">
                <!-- Main Dashboard -->
                <button class="menu-item active" onclick="showSection('dashboard')">
                    <i class="fas fa-chart-line"></i> Dashboard
                </button>
                
                <!-- Product Management -->
                <button class="menu-item" onclick="showSection('products')">
                    <i class="fas fa-coffee"></i> Products
                </button>
                <button class="menu-item" onclick="showSection('attributes')">
                    <i class="fas fa-sliders-h"></i> Attributes
                </button>
                
                <!-- Content Management -->
                <button class="menu-item" onclick="showSection('sliders')">
                    <i class="fas fa-images"></i> Banners
                </button>
                <button class="menu-item" onclick="showSection('brewing-methods')">
                    <i class="fas fa-flask"></i> Brewing Methods
                </button>
                <button class="menu-item" onclick="showSection('accessories')">
                    <i class="fas fa-tools"></i> Accessories
                </button>
                <button class="menu-item" onclick="showSection('gift-sets')">
                    <i class="fas fa-gift-box"></i> Gift Sets
                </button>
                
                <!-- Order & Customer Management -->
                <button class="menu-item" onclick="showSection('orders')">
                    <i class="fas fa-shopping-cart"></i> Orders
                </button>
                <button class="menu-item" onclick="showSection('users')">
                    <i class="fas fa-users"></i> Users & Firebase
                </button>
                
                <!-- New Features Management -->
                <button class="menu-item" onclick="showSection('reviews')">
                    <i class="fas fa-star"></i> Reviews
                </button>
                <button class="menu-item" onclick="showSection('loyalty')">
                    <i class="fas fa-gift"></i> Loyalty & Rewards
                </button>
                <button class="menu-item" onclick="showSection('referrals')">
                    <i class="fas fa-share-alt"></i> Referrals
                </button>
                <button class="menu-item" onclick="showSection('subscriptions')">
                    <i class="fas fa-sync-alt"></i> Subscriptions
                </button>
                
                <!-- Communication & Support -->
                <button class="menu-item" onclick="showSection('contact-inquiries')">
                    <i class="fas fa-headset"></i> Contact Inquiries
                </button>
                <button class="menu-item" onclick="showSection('newsletters')">
                    <i class="fas fa-envelope"></i> Newsletters
                </button>
                <button class="menu-item" onclick="showSection('support-tickets')">
                    <i class="fas fa-ticket-alt"></i> Support Tickets
                </button>
                <button class="menu-item" onclick="showSection('feedback')">
                    <i class="fas fa-star"></i> Product Reviews
                </button>
                
                <!-- Settings -->
                <button class="menu-item" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
                
                <!-- Logout -->
                <button class="menu-item" onclick="logout()" style="margin-top: 2rem; background: rgba(255,255,255,0.1);">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="content-header">
                    <h2><i class="fas fa-chart-line"></i> Business Dashboard</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="refreshDashboard()">
                            <i class="fas fa-refresh"></i> Refresh
                        </button>
                        <button class="btn btn-secondary" onclick="exportDashboard()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <!-- Dashboard Tabs -->
                <div class="dashboard-tabs">
                    <button class="tab-button active" onclick="showDashboardTab('overview')" data-tab="overview">
                        <i class="fas fa-chart-line"></i> Overview
                    </button>
                    <button class="tab-button" onclick="showDashboardTab('analytics')" data-tab="analytics">
                        <i class="fas fa-chart-pie"></i> Analytics
                    </button>
                    <button class="tab-button" onclick="showDashboardTab('reports')" data-tab="reports">
                        <i class="fas fa-file-alt"></i> Reports
                    </button>
                </div>
                
                <!-- Overview Tab -->
                <div id="overview-tab" class="dashboard-tab-content active">
                    <div id="dashboardStats">
                        <!-- Stats will be loaded here -->
                    </div>
                    
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Revenue Trend</h3>
                        </div>
                        <div class="section-content">
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Recent Orders</h3>
                        </div>
                        <div class="section-content">
                            <div id="recentOrdersTable">
                                <!-- Recent orders will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analytics Tab -->
                <div id="analytics-tab" class="dashboard-tab-content">
                    <div class="section-content" id="analyticsContent">
                        <!-- Analytics content will be loaded here -->
                    </div>
                </div>
                
                <!-- Reports Tab -->
                <div id="reports-tab" class="dashboard-tab-content">
                    <div class="section-content">
                        <!-- Report Filters -->
                        <div class="report-filters" style="margin-bottom: 2rem;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                <div>
                                    <label>Report Type</label>
                                    <select id="reportType" class="form-control" onchange="loadReportData()">
                                        <option value="sales">Sales Report</option>
                                        <option value="products">Product Performance</option>
                                        <option value="customers">Customer Activity</option>
                                        <option value="revenue">Revenue Analysis</option>
                                    </select>
                                </div>
                                <div>
                                    <label>Date Range</label>
                                    <select id="reportDateRange" class="form-control" onchange="loadReportData()">
                                        <option value="today">Today</option>
                                        <option value="week">This Week</option>
                                        <option value="month" selected>This Month</option>
                                        <option value="quarter">This Quarter</option>
                                        <option value="year">This Year</option>
                                        <option value="custom">Custom Range</option>
                                    </select>
                                </div>
                                <div>
                                    <label>Start Date</label>
                                    <input type="date" id="reportStartDate" class="form-control" onchange="loadReportData()">
                                </div>
                                <div>
                                    <label>End Date</label>
                                    <input type="date" id="reportEndDate" class="form-control" onchange="loadReportData()">
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                                <button class="btn btn-primary" onclick="loadReportData()">
                                    <i class="fas fa-sync"></i> Generate Report
                                </button>
                                <button class="btn btn-secondary" onclick="exportReport()">
                                    <i class="fas fa-download"></i> Export to Excel
                                </button>
                                <button class="btn btn-secondary" onclick="printReport()">
                                    <i class="fas fa-print"></i> Print Report
                                </button>
                            </div>
                        </div>

                        <!-- Report Summary Cards -->
                        <div id="reportSummary" style="margin-bottom: 2rem;">
                            <!-- Summary will be loaded here -->
                        </div>

                        <!-- Report Chart -->
                        <div class="section-card" style="margin-bottom: 2rem;">
                            <div style="height: 400px; padding: 1rem;">
                                <canvas id="reportChart"></canvas>
                            </div>
                        </div>

                        <!-- Report Table -->
                        <div class="section-card">
                            <div id="reportTable">
                                <!-- Table will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-coffee"></i> Products Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showAddProductModal()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="productsTable">
                            <!-- Products table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Attributes Section -->
            <section id="attributes" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-sliders-h"></i> Attributes Management</h2>
                    <div class="header-actions" id="attributesHeaderActions">
                        <button class="btn btn-secondary" id="backToGroupsBtn" onclick="backToGroups()" style="display:none;">
                            <i class="fas fa-arrow-left"></i> Back to Groups
                        </button>
                        <button class="btn btn-primary" id="createGroupBtn" onclick="showAttributeGroupModal()">
                            <i class="fas fa-plus"></i> Create Group
                        </button>
                        <button class="btn btn-primary" id="createValueBtn" onclick="showAttributeValueModal(currentGroupKey)" style="display:none;">
                            <i class="fas fa-plus"></i> Create Value
                        </button>
                    </div>
                </div>
                
                <!-- Attribute Groups View -->
                <div id="attributeGroupsView">
                    <div class="section-card">
                        <div class="section-content">
                            <div id="attributeGroupsContainer" class="attributes-grid">
                                <!-- Attribute groups cards will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attribute Values View -->
                <div id="attributeValuesView" style="display:none;">
                    <div class="section-card">
                        <div class="section-content">
                            <h3 id="valuesGroupName" style="margin-bottom: 20px; color: #A89A6A;"></h3>
                            <div id="attributeValuesContainer">
                                <!-- Attribute values will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Orders Section -->
            <section id="orders" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-shopping-cart"></i> Orders Management</h2>
                    <div class="header-actions">
                        <select id="orderStatusFilter" class="form-control" onchange="loadOrders()">
                            <option value="">All Orders</option>
                            <option value="pending">Pending</option>
                            <option value="confirmed">Confirmed</option>
                            <option value="preparing">Preparing</option>
                            <option value="ready">Ready</option>
                            <option value="delivered">Delivered</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚è≥</div>
                        <div class="stat-info">
                            <h3 id="pendingOrders">0</h3>
                            <p>Pending Orders</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë®‚Äçüç≥</div>
                        <div class="stat-info">
                            <h3 id="preparingOrders">0</h3>
                            <p>Preparing</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="completedOrders">0</h3>
                            <p>Completed</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <h3 id="todayRevenue">AED 0</h3>
                            <p>Today's Revenue</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="ordersTable">
                            <!-- Orders table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-users"></i> Users Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showAddUserModal()">
                            <i class="fas fa-plus"></i> Add User
                        </button>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="usersTable">
                            <!-- Users table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-cog"></i> Settings</h2>
                </div>
                <div id="settingsContent" class="section-card">
                    <div class="section-content">
                        <p>Loading settings...</p>
                    </div>
                </div>
            </section>

            <section id="sliders" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-images"></i> Banners</h2>
                </div>
                <div class="section-card">
                    <div class="section-content">
                        <div id="slidersTable">
                            <!-- Banners table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Brewing Methods Section -->
            <section id="brewing-methods" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-flask"></i> Brewing Methods Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="brewingMethodsManager.showAddModal()">
                            <i class="fas fa-plus"></i> Add Brewing Method
                        </button>
                        <button class="btn btn-secondary" onclick="brewingMethodsManager.loadBrewingMethods()">
                            <i class="fas fa-refresh"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Brewing Methods Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üçµ</div>
                        <div class="stat-info">
                            <h3 id="totalBrewingMethods">0</h3>
                            <p>Total Methods</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="activeBrewingMethods">0</h3>
                            <p>Active</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üëÅÔ∏è</div>
                        <div class="stat-info">
                            <h3 id="totalBrewingViews">0</h3>
                            <p>Total Views</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-info">
                            <h3 id="avgBrewingRating">0.0</h3>
                            <p>Avg Rating</p>
                        </div>
                    </div>
                </div>
                
                <!-- Brewing Methods Table -->
                <div class="section-card">
                    <div class="section-content">
                        <div id="brewingMethodsTable">
                            <!-- Brewing methods table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Accessories Section -->
            <section id="accessories" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-tools"></i> Accessories Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="accessoriesManager.showAddModal()">
                            <i class="fas fa-plus"></i> Add Accessory
                        </button>
                        <select id="accessoryTypeFilter" class="form-control" onchange="accessoriesManager.loadAccessories()">
                            <option value="">All Types</option>
                            <option value="grinder">Grinders</option>
                            <option value="mug">Mugs</option>
                            <option value="filter">Filters</option>
                            <option value="scale">Scales</option>
                            <option value="kettle">Kettles</option>
                            <option value="dripper">Drippers</option>
                            <option value="press">Presses</option>
                            <option value="other">Other</option>
                        </select>
                        <select id="accessoryStatusFilter" class="form-control" onchange="accessoriesManager.loadAccessories()">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="featured">Featured</option>
                        </select>
                    </div>
                </div>
                <div class="section-card">
                    <div class="section-content">
                        <div id="accessoriesTable">
                            <!-- Accessories table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gift Sets Section -->
            <section id="gift-sets" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-gift-box"></i> Gift Sets Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="giftSetsManager.showAddModal()">
                            <i class="fas fa-plus"></i> Add Gift Set
                        </button>
                        <select id="giftSetOccasionFilter" class="form-control" onchange="giftSetsManager.loadGiftSets()">
                            <option value="">All Occasions</option>
                            <option value="birthday">Birthday</option>
                            <option value="anniversary">Anniversary</option>
                            <option value="wedding">Wedding</option>
                            <option value="corporate">Corporate</option>
                            <option value="holiday">Holiday</option>
                            <option value="thank-you">Thank You</option>
                            <option value="housewarming">Housewarming</option>
                            <option value="graduation">Graduation</option>
                            <option value="general">General</option>
                        </select>
                        <select id="giftSetStatusFilter" class="form-control" onchange="giftSetsManager.loadGiftSets()">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="featured">Featured</option>
                            <option value="popular">Popular</option>
                        </select>
                    </div>
                </div>
                <div class="section-card">
                    <div class="section-content">
                        <div id="giftSetsTable">
                            <!-- Gift sets table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reviews Section -->
            <section id="reviews" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-star"></i> Reviews Management</h2>
                    <div class="header-actions">
                        <select id="reviewStatusFilter" class="form-control" onchange="loadReviews()">
                            <option value="">All Reviews</option>
                            <option value="pending">Pending Approval</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                            <option value="flagged">Flagged</option>
                        </select>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚è≥</div>
                        <div class="stat-info">
                            <h3 id="pendingReviews">0</h3>
                            <p>Pending Reviews</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="approvedReviews">0</h3>
                            <p>Approved</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-info">
                            <h3 id="averageRating">0.0</h3>
                            <p>Average Rating</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <h3 id="totalReviews">0</h3>
                            <p>Total Reviews</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="reviewsTable">
                            <!-- Reviews table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Loyalty & Rewards Section -->
            <section id="loyalty" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-gift"></i> Loyalty & Rewards</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="loyaltyManager.showAwardPointsModal()">
                            <i class="fas fa-plus"></i> Award Points
                        </button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <h3 id="totalLoyaltyMembers">0</h3>
                            <p>Total Members</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéÅ</div>
                        <div class="stat-info">
                            <h3 id="pointsAwarded">0</h3>
                            <p>Points Awarded</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí≥</div>
                        <div class="stat-info">
                            <h3 id="pointsRedeemed">0</h3>
                            <p>Points Redeemed</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üëë</div>
                        <div class="stat-info">
                            <h3 id="goldMembers">0</h3>
                            <p>Gold+ Members</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="loyaltyTable">
                            <!-- Loyalty table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Referrals Section -->
            <section id="referrals" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-share-alt"></i> Referral Program</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="exportReferralData()">
                            <i class="fas fa-download"></i> Export Data
                        </button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <h3 id="totalReferrals">0</h3>
                            <p>Total Referrals</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="completedReferrals">0</h3>
                            <p>Completed</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <h3 id="conversionRate">0%</h3>
                            <p>Conversion Rate</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-info">
                            <h3 id="topReferrer">-</h3>
                            <p>Top Referrer</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="referralsTable">
                            <!-- Referrals table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Subscriptions Section -->
            <section id="subscriptions" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-sync-alt"></i> Subscriptions Management</h2>
                </div>
                
                <!-- Tab Navigation -->
                <div class="tabs-container" style="margin-bottom: 24px;">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchSubscriptionTab('active-subscriptions')">
                            <i class="fas fa-boxes"></i> Active Subscriptions
                        </button>
                        <button class="tab-btn" onclick="switchSubscriptionTab('subscription-plans')">
                            <i class="fas fa-clipboard-list"></i> Subscription Plans
                        </button>
                    </div>
                </div>
                
                <!-- Active Subscriptions Tab -->
                <div id="active-subscriptions-tab" class="tab-content active">
                    <div class="content-header" style="margin-top: 0;">
                        <h3 style="margin: 0; font-size: 1.2rem;">Customer Subscriptions</h3>
                        <div class="header-actions">
                            <select id="subscriptionStatusFilter" class="form-control" onchange="loadSubscriptions()">
                                <option value="">All Subscriptions</option>
                                <option value="active">Active</option>
                                <option value="paused">Paused</option>
                                <option value="cancelled">Cancelled</option>
                                <option value="expired">Expired</option>
                            </select>
                        </div>
                    </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-info">
                            <h3 id="activeSubscriptions">0</h3>
                            <p>Active Subscriptions</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <h3 id="monthlyRecurringRevenue">AED 0</h3>
                            <p>Monthly Revenue</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è∏Ô∏è</div>
                        <div class="stat-info">
                            <h3 id="pausedSubscriptions">0</h3>
                            <p>Paused</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <h3 id="retentionRate">0%</h3>
                            <p>Retention Rate</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-card">
                    <div class="section-content">
                        <div id="subscriptionsTable">
                            <!-- Subscriptions table will be loaded here -->
                        </div>
                    </div>
                </div>
                </div>
                <!-- End Active Subscriptions Tab -->
                
                <!-- Subscription Plans Tab -->
                <div id="subscription-plans-tab" class="tab-content" style="display: none;">
                    <div class="content-header" style="margin-top: 0;">
                        <h3 style="margin: 0; font-size: 1.2rem;">Subscription Plans</h3>
                        <div class="header-actions">
                            <button class="btn btn-primary" onclick="openPlanModal()">
                                <i class="fas fa-plus"></i> Add New Plan
                            </button>
                        </div>
                    </div>
                    
                    <!-- Plans Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìã</div>
                            <div class="stat-info">
                                <h3 id="totalPlans">0</h3>
                                <p>Total Plans</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-info">
                                <h3 id="activePlans">0</h3>
                                <p>Active Plans</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-info">
                                <h3 id="planSubscribers">0</h3>
                                <p>Total Subscribers</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-info">
                                <h3 id="planRevenue">AED 0</h3>
                                <p>Potential Revenue</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Plans Table -->
                    <div class="section-card">
                        <div class="section-content">
                            <div id="plansTable">
                                <!-- Plans table will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Subscription Plans Tab -->
                
            </section>

            <!-- Contact Inquiries Section -->
            <section id="contact-inquiries" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-headset"></i> Contact Inquiries Management</h2>
                    <div class="header-actions">
                        <select id="inquiryStatusFilter" class="form-control" onchange="contactInquiriesManager.loadInquiries()">
                            <option value="">All Status</option>
                            <option value="new">New</option>
                            <option value="in-progress">In Progress</option>
                            <option value="pending-info">Pending Info</option>
                            <option value="resolved">Resolved</option>
                            <option value="closed">Closed</option>
                            <option value="escalated">Escalated</option>
                        </select>
                        <select id="inquiryTypeFilter" class="form-control" onchange="contactInquiriesManager.loadInquiries()">
                            <option value="">All Types</option>
                            <option value="general">General</option>
                            <option value="product-inquiry">Product Inquiry</option>
                            <option value="bulk-order">Bulk Order</option>
                            <option value="partnership">Partnership</option>
                            <option value="complaint">Complaint</option>
                            <option value="feedback">Feedback</option>
                            <option value="technical-support">Technical Support</option>
                            <option value="wholesale">Wholesale</option>
                            <option value="franchise">Franchise</option>
                            <option value="catering">Catering</option>
                            <option value="corporate-gifts">Corporate Gifts</option>
                            <option value="return-refund">Return/Refund</option>
                            <option value="other">Other</option>
                        </select>
                        <select id="inquiryPriorityFilter" class="form-control" onchange="contactInquiriesManager.loadInquiries()">
                            <option value="">All Priorities</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="urgent">Urgent</option>
                        </select>
                        <button class="btn btn-secondary" onclick="contactInquiriesManager.loadOverdueInquiries()">
                            <i class="fas fa-exclamation-triangle"></i> Overdue
                        </button>
                        <button class="btn btn-info" onclick="contactInquiriesManager.showAnalytics()">
                            <i class="fas fa-chart-bar"></i> Analytics
                        </button>
                    </div>
                </div>
                <div class="section-card">
                    <div class="section-content">
                        <div id="contactInquiriesTable">
                            <!-- Contact inquiries table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Newsletters Section -->
            <section id="newsletters" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-envelope"></i> Newsletter Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="newslettersManager.showAddSubscriberModal()">
                            <i class="fas fa-user-plus"></i> Add Subscriber
                        </button>
                        <button class="btn btn-secondary" onclick="newslettersManager.exportSubscribers()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <!-- Newsletter Stats -->
                <div id="newsletterStats">
                    <!-- Stats will be loaded here -->
                </div>
                
                <!-- Filter Buttons -->
                <div class="filter-buttons" style="margin-bottom: 1.5rem;">
                    <button class="filter-btn active" onclick="newslettersManager.loadSubscribers('all')">
                        All Subscribers
                    </button>
                    <button class="filter-btn" onclick="newslettersManager.loadSubscribers('active')">
                        Active Only
                    </button>
                </div>
                
                <!-- Subscribers Table -->
                <div class="section-card">
                    <div class="section-content">
                        <div id="subscribersTable">
                            <!-- Subscribers table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Support Tickets Section -->
            <section id="support-tickets" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-ticket-alt"></i> Support Tickets</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="supportTicketsManager.loadTickets('all')">
                            <i class="fas fa-refresh"></i> Refresh
                        </button>
                        <button class="btn btn-secondary" onclick="supportTicketsManager.exportTickets()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <!-- Support Stats -->
                <div id="supportStats">
                    <!-- Stats will be loaded here -->
                </div>
                
                <!-- Filter Buttons -->
                <div class="filter-buttons" style="margin-bottom: 1.5rem;">
                    <button class="filter-btn active" onclick="supportTicketsManager.loadTickets('all')">
                        All Tickets
                    </button>
                    <button class="filter-btn" onclick="supportTicketsManager.loadTickets('open')">
                        Open
                    </button>
                    <button class="filter-btn" onclick="supportTicketsManager.loadTickets('in-progress')">
                        In Progress
                    </button>
                    <button class="filter-btn" onclick="supportTicketsManager.loadTickets('resolved')">
                        Resolved
                    </button>
                </div>
                
                <!-- Tickets Table -->
                <div class="section-card">
                    <div class="section-content">
                        <div id="ticketsTable">
                            <!-- Tickets table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Feedback Section -->
                        <!-- Feedback Section -->
            <section id="feedback" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-star"></i> Product Reviews Management</h2>
                    <div class="content-actions">
                        <button class="btn btn-primary" onclick="feedbackManager.loadFeedback('all')">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-secondary" onclick="feedbackManager.exportFeedback()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <!-- Feedback Stats -->
                <div id="feedbackStats">
                    <!-- Stats will be loaded here -->
                </div>
                
                <!-- Filter Buttons -->
                <div class="filter-buttons" style="margin-bottom: 1.5rem;">
                    <button class="filter-btn active" onclick="feedbackManager.loadFeedback('all')">
                        All Reviews
                    </button>
                    <button class="filter-btn" onclick="feedbackManager.loadFeedback('pending')">
                        Pending Approval
                    </button>
                    <button class="filter-btn" onclick="feedbackManager.loadFeedback('approved')">
                        Approved
                    </button>
                    <button class="filter-btn" onclick="feedbackManager.loadFeedback('hidden')">
                        Hidden
                    </button>
                </div>
                
                <!-- Feedback Table -->
                <div class="section-card">
                    <div class="section-content">
                        <div id="feedbackTable">
                            <!-- Feedback table will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <!-- Global Loading Overlay -->
    <div id="globalLoading" class="global-loading">
        <div style="text-align: center;">
            <div class="spinner"></div>
            <div id="loadingText">Loading...</div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" style="position: fixed; top: 20px; right: 20px; z-index: 10001;"></div>

    <!-- Enhanced Product Modal -->
    <div id="productModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 1200px; max-height: 95vh; overflow: hidden;">
            <div class="modal-header">
                <h3 id="modalTitle">‚òï Create New Coffee Product</h3>
                <button class="modal-close" onclick="closeProductModal()">&times;</button>
            </div>
            
            <!-- Tab Navigation -->
            <div class="product-tabs">
                <button class="tab-btn active" onclick="switchProductTab('basic')">
                    <i class="fas fa-info-circle"></i> Basic Info
                </button>
                <button class="tab-btn" onclick="switchProductTab('pricing')">
                    <i class="fas fa-tags"></i> Pricing & Variants
                </button>
                <button class="tab-btn" onclick="switchProductTab('attributes')">
                    <i class="fas fa-coffee"></i> Coffee Details
                </button>
                <button class="tab-btn" onclick="switchProductTab('categories')">
                    <i class="fas fa-folder"></i> Categories
                </button>
                <button class="tab-btn" onclick="switchProductTab('preview')">
                    <i class="fas fa-eye"></i> Preview
                </button>
            </div>

            <div class="modal-body" style="max-height: calc(95vh - 180px); overflow-y: auto;">
                <form id="productCreationForm" onsubmit="handleProductSubmit(event)">
                    
                    <!-- BASIC INFO TAB -->
                    <div id="tab-basic" class="tab-content active">
                        <h4 class="tab-section-title">üìù Product Information</h4>
                        
                        <!-- Bulk Image Upload -->
                        <div class="form-group">
                            <label for="productImages">Product Images (Multiple)</label>
                            <input type="file" id="productImages" accept="image/*" multiple onchange="previewProductImages(event)">
                            <small>Upload multiple images (first will be main image)</small>
                            <div id="productImagesPreview" class="images-preview-grid"></div>
                        </div>

                        <!-- Product Names -->
                        <div class="form-row">
                            <div class="form-group flex-1">
                                <label for="productName">Product Name (English) *</label>
                                <input type="text" id="productName" name="name" required 
                                       placeholder="e.g., Ethiopian Yirgacheffe Premium" 
                                       oninput="autoGenerateSKU(); autoGenerateSlug()">
                            </div>
                            <div class="form-group flex-1">
                                <label for="productNameAr">Product Name (Arabic) *</label>
                                <input type="text" id="productNameAr" name="nameAr" required 
                                       placeholder="Ÿäÿ±ÿ¨ÿßÿ™ÿ¥ŸäŸÅ ÿßŸÑÿ•ÿ´ŸäŸàÿ®Ÿäÿ© ÿ®ÿ±ŸäŸÖŸäŸàŸÖ" dir="rtl">
                            </div>
                        </div>

                        <!-- Auto-generated Fields -->
                        <div class="form-row">
                            <div class="form-group flex-1">
                                <label for="productSlug">SEO URL Slug</label>
                                <input type="text" id="productSlug" name="slug" 
                                       placeholder="ethiopian-yirgacheffe-premium">
                                <small>Auto-generated from product name, edit if needed</small>
                            </div>
                            <div class="form-group flex-1">
                                <label for="productBaseSKU">Base SKU</label>
                                <input type="text" id="productBaseSKU" name="baseSKU" readonly 
                                       placeholder="Will be auto-generated">
                                <small>Pattern: COF-{origin}-{roast}</small>
                            </div>
                        </div>

                        <!-- Descriptions with Rich Text -->
                        <div class="form-group">
                            <label for="productDescription">Description (English) *</label>
                            <div class="rich-text-toolbar">
                                <button type="button" onclick="formatText('bold')"><i class="fas fa-bold"></i></button>
                                <button type="button" onclick="formatText('italic')"><i class="fas fa-italic"></i></button>
                                <button type="button" onclick="formatText('underline')"><i class="fas fa-underline"></i></button>
                                <button type="button" onclick="formatText('insertUnorderedList')"><i class="fas fa-list-ul"></i></button>
                            </div>
                            <textarea id="productDescription" name="description" required rows="5" 
                                      placeholder="Describe the coffee's flavor profile, origin story, processing method, tasting notes..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="productDescriptionAr">Description (Arabic) *</label>
                            <textarea id="productDescriptionAr" name="descriptionAr" required rows="5" 
                                      placeholder="ŸàÿµŸÅ ÿ™ŸÅÿµŸäŸÑŸä ŸÑŸÑŸÇŸáŸàÿ©ÿå ŸÜŸÉŸáÿ™Ÿáÿßÿå ŸÖŸÜÿ¥ÿ£Ÿáÿß..." dir="rtl"></textarea>
                        </div>

                        <!-- Tags -->
                        <div class="form-group">
                            <label for="productTags">Tags (comma-separated)</label>
                            <input type="text" id="productTags" name="tags" 
                                   placeholder="e.g., specialty, award-winning, organic, fair-trade">
                            <div id="tagsDisplay" class="tags-display"></div>
                        </div>
                    </div>

                    <!-- PRICING & VARIANTS TAB -->
                    <div id="tab-pricing" class="tab-content">
                        <h4 class="tab-section-title">üí∞ Pricing & Inventory</h4>
                        
                        <div class="pricing-validation-alert" id="pricingAlert" style="display:none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span id="pricingAlertText"></span>
                        </div>

                        <!-- 250gm Variant -->
                        <div class="variant-card">
                            <div class="variant-header">
                                <h5>üì¶ 250gm Pack</h5>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="variant_250gm_active" checked onchange="toggleVariant('250gm')">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div id="variant_250gm_content" class="variant-content">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="variant_250gm_price">Price (AED) *</label>
                                        <input type="number" id="variant_250gm_price" name="variant_250gm_price" 
                                               step="0.01" value="45.00" min="0" oninput="validatePricing()">
                                    </div>
                                    <div class="form-group">
                                        <label for="variant_250gm_stock">Stock Quantity *</label>
                                        <input type="number" id="variant_250gm_stock" name="variant_250gm_stock" 
                                               value="100" min="0" oninput="checkLowStock('250gm')">
                                        <small class="stock-warning" id="stock_warning_250gm"></small>
                                    </div>
                                    <div class="form-group">
                                        <label for="variant_250gm_sku">SKU</label>
                                        <input type="text" id="variant_250gm_sku" readonly>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group flex-1">
                                        <label for="variant_250gm_desc_en">Description (English)</label>
                                        <input type="text" id="variant_250gm_desc_en" 
                                               value="Perfect for trying new flavors">
                                    </div>
                                    <div class="form-group flex-1">
                                        <label for="variant_250gm_desc_ar">Description (Arabic)</label>
                                        <input type="text" id="variant_250gm_desc_ar" 
                                               value="ŸÖÿ´ÿßŸÑŸäÿ© ŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÜŸÉŸáÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©" dir="rtl">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 500gm Variant -->
                        <div class="variant-card">
                            <div class="variant-header">
                                <h5>üì¶ 500gm Pack</h5>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="variant_500gm_active" checked onchange="toggleVariant('500gm')">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div id="variant_500gm_content" class="variant-content">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="variant_500gm_price">Price (AED) *</label>
                                        <input type="number" id="variant_500gm_price" name="variant_500gm_price" 
                                               step="0.01" value="85.00" min="0" oninput="validatePricing()">
                                    </div>
                                    <div class="form-group">
                                        <label for="variant_500gm_stock">Stock Quantity *</label>
                                        <input type="number" id="variant_500gm_stock" name="variant_500gm_stock" 
                                               value="100" min="0" oninput="checkLowStock('500gm')">
                                        <small class="stock-warning" id="stock_warning_500gm"></small>
                                    </div>
                                    <div class="form-group">
                                        <label for="variant_500gm_sku">SKU</label>
                                        <input type="text" id="variant_500gm_sku" readonly>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group flex-1">
                                        <label for="variant_500gm_desc_en">Description (English)</label>
                                        <input type="text" id="variant_500gm_desc_en" 
                                               value="Perfect for regular consumption">
                                    </div>
                                    <div class="form-group flex-1">
                                        <label for="variant_500gm_desc_ar">Description (Arabic)</label>
                                        <input type="text" id="variant_500gm_desc_ar" 
                                               value="ŸÖÿ´ÿßŸÑŸäÿ© ŸÑŸÑÿßÿ≥ÿ™ŸáŸÑÿßŸÉ ÿßŸÑŸÖŸÜÿ™ÿ∏ŸÖ" dir="rtl">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 1kg Variant -->
                        <div class="variant-card">
                            <div class="variant-header">
                                <h5>üì¶ 1kg Pack (Bulk)</h5>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="variant_1kg_active" checked onchange="toggleVariant('1kg')">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div id="variant_1kg_content" class="variant-content">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="variant_1kg_price">Price (AED) *</label>
                                        <input type="number" id="variant_1kg_price" name="variant_1kg_price" 
                                               step="0.01" value="155.00" min="0" oninput="validatePricing()">
                                    </div>
                                    <div class="form-group">
                                        <label for="variant_1kg_stock">Stock Quantity *</label>
                                        <input type="number" id="variant_1kg_stock" name="variant_1kg_stock" 
                                               value="50" min="0" oninput="checkLowStock('1kg')">
                                        <small class="stock-warning" id="stock_warning_1kg"></small>
                                    </div>
                                    <div class="form-group">
                                        <label for="variant_1kg_sku">SKU</label>
                                        <input type="text" id="variant_1kg_sku" readonly>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group flex-1">
                                        <label for="variant_1kg_desc_en">Description (English)</label>
                                        <input type="text" id="variant_1kg_desc_en" 
                                               value="Best value for coffee enthusiasts">
                                    </div>
                                    <div class="form-group flex-1">
                                        <label for="variant_1kg_desc_ar">Description (Arabic)</label>
                                        <input type="text" id="variant_1kg_desc_ar" 
                                               value="ÿ£ŸÅÿ∂ŸÑ ŸÇŸäŸÖÿ© ŸÑÿπÿ¥ÿßŸÇ ÿßŸÑŸÇŸáŸàÿ©" dir="rtl">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="pricing-summary">
                            <h5>üí° Pricing Summary</h5>
                            <div id="pricingSummaryContent"></div>
                        </div>
                    </div>

                    <!-- COFFEE ATTRIBUTES TAB -->
                    <div id="tab-attributes" class="tab-content">
                        <h4 class="tab-section-title">‚òï Coffee Specifications</h4>

                        <div class="form-row">
                            <div class="form-group flex-1">
                                <label for="productOrigin">Origin Country *</label>
                                <select id="productOrigin" name="origin" required onchange="autoGenerateSKU()">
                                    <option value="">Select origin...</option>
                                    <optgroup label="Africa">
                                        <option value="Ethiopia">Ethiopia</option>
                                        <option value="Kenya">Kenya</option>
                                        <option value="Tanzania">Tanzania</option>
                                        <option value="Rwanda">Rwanda</option>
                                        <option value="Burundi">Burundi</option>
                                    </optgroup>
                                    <optgroup label="Latin America">
                                        <option value="Colombia">Colombia</option>
                                        <option value="Brazil">Brazil</option>
                                        <option value="Guatemala">Guatemala</option>
                                        <option value="Costa Rica">Costa Rica</option>
                                        <option value="Honduras">Honduras</option>
                                        <option value="Peru">Peru</option>
                                        <option value="El Salvador">El Salvador</option>
                                    </optgroup>
                                    <optgroup label="Asia & Pacific">
                                        <option value="Indonesia">Indonesia</option>
                                        <option value="India">India</option>
                                        <option value="Vietnam">Vietnam</option>
                                        <option value="Papua New Guinea">Papua New Guinea</option>
                                        <option value="Yemen">Yemen</option>
                                    </optgroup>
                                    <optgroup label="Other">
                                        <option value="Multi-Origin">Multi-Origin Blend</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div class="form-group flex-1">
                                <label for="productRoastLevel">Roast Level *</label>
                                <select id="productRoastLevel" name="roastLevel" required onchange="autoGenerateSKU()">
                                    <option value="">Select roast level...</option>
                                    <option value="Light">‚òÄÔ∏è Light Roast</option>
                                    <option value="Medium-Light">üå§Ô∏è Medium-Light Roast</option>
                                    <option value="Medium">‚òÅÔ∏è Medium Roast</option>
                                    <option value="Medium-Dark">üå•Ô∏è Medium-Dark Roast</option>
                                    <option value="Dark">üåë Dark Roast</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group flex-1">
                                <label for="productProcessing">Processing Method</label>
                                <select id="productProcessing" name="processingMethod">
                                    <option value="">Select processing...</option>
                                    <option value="Washed">Washed (Wet Processed)</option>
                                    <option value="Natural">Natural (Dry Processed)</option>
                                    <option value="Honey">Honey Processed</option>
                                    <option value="Semi-Washed">Semi-Washed</option>
                                    <option value="Anaerobic">Anaerobic Fermentation</option>
                                </select>
                            </div>

                            <div class="form-group flex-1">
                                <label for="productAltitude">Altitude (meters)</label>
                                <input type="number" id="productAltitude" name="altitude" 
                                       placeholder="e.g., 1800" min="0">
                            </div>
                        </div>

                        <!-- Flavor Profile Tags -->
                        <div class="form-group">
                            <label>Flavor Profile (Select all that apply)</label>
                            <div class="flavor-tags-grid">
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Fruity">
                                    <span>üçì Fruity</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Nutty">
                                    <span>ü•ú Nutty</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Chocolate">
                                    <span>üç´ Chocolate</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Floral">
                                    <span>üå∏ Floral</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Spicy">
                                    <span>üå∂Ô∏è Spicy</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Caramel">
                                    <span>üçÆ Caramel</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Citrus">
                                    <span>üçä Citrus</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Berry">
                                    <span>ü´ê Berry</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Earthy">
                                    <span>üåç Earthy</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Sweet">
                                    <span>üçØ Sweet</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Smoky">
                                    <span>üí® Smoky</span>
                                </label>
                                <label class="flavor-tag">
                                    <input type="checkbox" name="flavorProfile" value="Winey">
                                    <span>üç∑ Winey</span>
                                </label>
                            </div>
                        </div>

                        <!-- Additional Coffee Info -->
                        <div class="form-row">
                            <div class="form-group flex-1">
                                <label for="productVariety">Coffee Variety</label>
                                <input type="text" id="productVariety" name="variety" 
                                       placeholder="e.g., Arabica, Bourbon, Typica">
                            </div>
                            <div class="form-group flex-1">
                                <label for="productHarvest">Harvest Year</label>
                                <input type="number" id="productHarvest" name="harvestYear" 
                                       min="2020" max="2030" placeholder="2024">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="productCuppingNotes">Cupping Notes</label>
                            <textarea id="productCuppingNotes" name="cuppingNotes" rows="3" 
                                      placeholder="Professional tasting notes and scoring details..."></textarea>
                        </div>
                    </div>

                    <!-- CATEGORIES TAB -->
                    <div id="tab-categories" class="tab-content">
                        <h4 class="tab-section-title">üìÅ Category Management</h4>

                        <div class="categories-grid">
                            <!-- Origin Categories -->
                            <div class="category-group">
                                <h5><i class="fas fa-globe"></i> Origin Categories</h5>
                                <div id="originCategories" class="category-checkboxes">
                                    <!-- Will be populated dynamically -->
                                </div>
                            </div>

                            <!-- Roast Level Categories -->
                            <div class="category-group">
                                <h5><i class="fas fa-fire"></i> Roast Level Categories</h5>
                                <div id="roastCategories" class="category-checkboxes">
                                    <!-- Will be populated dynamically -->
                                </div>
                            </div>

                            <!-- Bean Type Categories -->
                            <div class="category-group">
                                <h5><i class="fas fa-coffee"></i> Bean Type Categories</h5>
                                <div id="beanTypeCategories" class="category-checkboxes">
                                    <!-- Will be populated dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Selected Categories Display -->
                        <div class="selected-categories">
                            <h5>Selected Categories:</h5>
                            <div id="selectedCategoriesDisplay" class="category-tags-display">
                                <span class="no-categories">No categories selected yet</span>
                            </div>
                        </div>

                        <!-- Premium Badge -->
                        <div class="form-group" style="margin-top: 20px;">
                            <label class="checkbox-label">
                                <input type="checkbox" id="productIsPremium" name="isPremium">
                                <span>‚ú® Mark as Premium Product</span>
                            </label>
                            <small>Premium products will show a special badge</small>
                        </div>

                        <!-- Status Toggles -->
                        <div class="form-row" style="margin-top: 20px;">
                            <div class="form-group flex-1">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="productIsActive" name="isActive" checked>
                                    <span>üëÅÔ∏è Active (Visible to Customers)</span>
                                </label>
                            </div>
                            <div class="form-group flex-1">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="productIsFeatured" name="isFeatured">
                                    <span>‚≠ê Featured Product</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- PREVIEW TAB -->
                    <div id="tab-preview" class="tab-content">
                        <h4 class="tab-section-title">üëÅÔ∏è Product Preview</h4>
                        <div id="productPreview" class="product-preview-container">
                            <!-- Preview will be generated dynamically -->
                        </div>
                    </div>

                    <!-- Hidden input for edit mode -->
                    <input type="hidden" id="productEditId" name="productId">

                    <!-- Form Actions -->
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeProductModal()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="button" class="btn btn-outline" onclick="saveProductDraft()">
                            <i class="fas fa-save"></i> Save as Draft
                        </button>
                        <button type="submit" id="createProductBtn" class="btn btn-primary">
                            <i class="fas fa-check"></i> Publish Product
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <style>
        /* Product Modal Enhanced Styles */
        .product-tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
            padding: 0;
            margin: 0;
            overflow-x: auto;
        }

        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            background: #e8e8e8;
            color: #333;
        }

        .tab-btn.active {
            background: white;
            color: #A89A6A;
            border-bottom-color: #A89A6A;
        }

        .tab-btn i {
            margin-right: 8px;
        }

        .tab-content {
            display: none;
            padding: 25px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-section-title {
            font-size: 20px;
            color: #A89A6A;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            margin-bottom: 0;
        }

        .flex-1 {
            flex: 1;
        }

        /* Image Preview Grid */
        .images-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .preview-image-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #ddd;
        }

        .preview-image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-image-item .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
        }

        .preview-image-item.main {
            border-color: #A89A6A;
        }

        .preview-image-item .main-badge {
            position: absolute;
            bottom: 5px;
            left: 5px;
            background: #A89A6A;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
        }

        /* Rich Text Toolbar */
        .rich-text-toolbar {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
        }

        .rich-text-toolbar button {
            padding: 6px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .rich-text-toolbar button:hover {
            background: #A89A6A;
            color: white;
            border-color: #A89A6A;
        }

        /* Tags Display */
        .tags-display {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .tag-item {
            background: #f0f0f0;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .tag-item .remove-tag {
            cursor: pointer;
            color: #999;
            font-weight: bold;
        }

        .tag-item .remove-tag:hover {
            color: #f44336;
        }

        /* Variant Cards */
        .variant-card {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .variant-card.inactive {
            opacity: 0.5;
        }

        .variant-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .variant-header h5 {
            margin: 0;
            color: #333;
            font-size: 16px;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #A89A6A;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Pricing Validation Alert */
        .pricing-validation-alert {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pricing-validation-alert i {
            color: #ff9800;
            font-size: 20px;
        }

        .pricing-validation-alert.error {
            background: #f8d7da;
            border-color: #f44336;
        }

        .pricing-validation-alert.error i {
            color: #f44336;
        }

        .pricing-validation-alert.success {
            background: #d4edda;
            border-color: #4caf50;
        }

        .pricing-validation-alert.success i {
            color: #4caf50;
        }

        /* Stock Warning */
        .stock-warning {
            color: #ff9800;
            font-size: 12px;
            display: none;
        }

        .stock-warning.show {
            display: block;
        }

        /* Pricing Summary */
        .pricing-summary {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }

        .pricing-summary h5 {
            margin-top: 0;
            color: #2e7d32;
        }

        /* Flavor Tags Grid */
        .flavor-tags-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .flavor-tag {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .flavor-tag:hover {
            border-color: #A89A6A;
            background: #fafafa;
        }

        .flavor-tag input[type="checkbox"] {
            margin-right: 8px;
        }

        .flavor-tag input[type="checkbox"]:checked + span {
            font-weight: bold;
            color: #A89A6A;
        }

        /* Categories Grid */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .category-group {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
        }

        .category-group h5 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #A89A6A;
            font-size: 16px;
        }

        .category-checkboxes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .category-checkboxes label {
            display: flex;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .category-checkboxes label:hover {
            background: #f0f0f0;
        }

        .category-checkboxes input[type="checkbox"] {
            margin-right: 10px;
        }

        /* Selected Categories Display */
        .selected-categories {
            background: #fff;
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 20px;
            min-height: 80px;
        }

        .selected-categories h5 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 16px;
            color: #666;
        }

        .category-tags-display {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-tag {
            background: linear-gradient(135deg, #A89A6A, #C4B598);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .category-tag .remove-category {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.8;
        }

        .category-tag .remove-category:hover {
            opacity: 1;
        }

        .no-categories {
            color: #999;
            font-style: italic;
        }

        /* Checkbox Labels */
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-label:hover {
            border-color: #A89A6A;
            background: #fafafa;
        }

        .checkbox-label input[type="checkbox"]:checked ~ span {
            color: #A89A6A;
            font-weight: 600;
        }

        /* Product Preview */
        .product-preview-container {
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 30px;
            background: white;
        }

        .preview-image-main {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .preview-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .preview-price {
            font-size: 28px;
            color: #A89A6A;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .preview-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .preview-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .preview-badge {
            background: #f0f0f0;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .preview-badge.premium {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .modal-content {
                max-width: 95% !important;
                margin: 10px;
            }

            .product-tabs {
                overflow-x: scroll;
            }

            .tab-btn {
                min-width: 120px;
                padding: 12px 15px;
                font-size: 13px;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .categories-grid {
                grid-template-columns: 1fr;
            }

            .flavor-tags-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* RTL Support */
        [dir="rtl"] .form-group label {
            text-align: right;
        }

        [dir="rtl"] .tab-btn i {
            margin-right: 0;
            margin-left: 8px;
        }

        /* Attributes Section Styles - Modern & User-Friendly */
        .attributes-grid, #attributeGroupsContainer {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 24px;
            padding: 0;
        }

        /* Empty State */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 80px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 16px;
            border: 2px dashed #dee2e6;
        }

        .empty-icon {
            font-size: 72px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .empty-state h3 {
            color: #495057;
            margin-bottom: 12px;
            font-size: 24px;
        }

        .empty-state p {
            color: #6c757d;
            margin-bottom: 24px;
            font-size: 16px;
        }

        /* Attribute Card - Modern Design */
        .attr-card {
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #f0f0f0;
        }

        .attr-card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            transform: translateY(-4px);
            border-color: #A89A6A;
        }

        .attr-card-header {
            padding: 24px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
            position: relative;
        }

        .attr-icon {
            font-size: 40px;
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 16px;
            flex-shrink: 0;
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .attr-info {
            flex: 1;
            min-width: 0;
        }

        .attr-title {
            margin: 0 0 12px 0;
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            line-height: 1.3;
        }

        .attr-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .attr-badges .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .scope-product {
            background: #e3f2fd;
            color: #1976d2;
        }

        .scope-filter {
            background: #fff3e0;
            color: #f57c00;
        }

        .scope-both {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .badge-type {
            background: #e8f5e9;
            color: #388e3c;
        }

        .attr-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .edit-btn {
            background: #e3f2fd;
            color: #1976d2;
        }

        .edit-btn:hover {
            background: #1976d2;
            color: white;
            transform: scale(1.1);
        }

        .delete-btn {
            background: #ffebee;
            color: #d32f2f;
        }

        .delete-btn:hover {
            background: #d32f2f;
            color: white;
            transform: scale(1.1);
        }

        .attr-card-body {
            padding: 0 24px 24px 24px;
        }

        .attr-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #A89A6A;
            margin-bottom: 4px;
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .stat-icon.required, .stat-icon.active {
            color: #4caf50;
        }

        .stat-icon.optional, .stat-icon.inactive {
            color: #9e9e9e;
        }

        .stat-label {
            font-size: 11px;
            color: #6c757d;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .attr-key {
            padding: 12px 16px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #495057;
        }

        .attr-key i {
            color: #A89A6A;
        }

        .attr-key code {
            background: white;
            padding: 4px 8px;
            border-radius: 4px;
            color: #A89A6A;
            font-weight: 600;
            border: 1px solid #dee2e6;
        }

        .manage-values-btn {
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, #A89A6A 0%, #8d7d55 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(168, 154, 106, 0.3);
        }

        .manage-values-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(168, 154, 106, 0.4);
            background: linear-gradient(135deg, #8d7d55 0%, #A89A6A 100%);
        }

        .value-count {
            background: rgba(255, 255, 255, 0.3);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }

        /* Attribute Values List - Modern Design */
        .attribute-value-item {
            background: white;
            border: 1px solid #e8e8e8;
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .attribute-value-item:hover {
            background: #f8f9fa;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateX(4px);
            border-color: #A89A6A;
        }

        .attribute-value-item.level-1 {
            margin-left: 40px;
            border-left: 3px solid #A89A6A;
        }

        .attribute-value-item.level-2 {
            margin-left: 80px;
            border-left: 3px solid #8d7d55;
        }

        .attribute-value-item.level-1::before,
        .attribute-value-item.level-2::before {
            content: '‚Ü≥';
            position: absolute;
            left: -28px;
            color: #A89A6A;
            font-size: 18px;
            font-weight: bold;
        }

        .attribute-value-icon {
            font-size: 28px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .attribute-value-info {
            flex: 1;
            min-width: 0;
        }

        .attribute-value-info h5 {
            margin: 0 0 6px 0;
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .attribute-value-info .value-meta {
            font-size: 13px;
            color: #6c757d;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .value-meta code {
            background: #f1f3f5;
            padding: 2px 8px;
            border-radius: 4px;
            color: #A89A6A;
            font-size: 12px;
            font-weight: 600;
        }

        .attribute-value-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .attribute-value-actions button {
            padding: 8px 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-add-child {
            background: #e3f2fd;
            color: #1976d2;
        }

        .btn-add-child:hover {
            background: #1976d2;
            color: white;
            transform: scale(1.05);
        }

        .btn-edit-value {
            background: #fff3e0;
            color: #f57c00;
        }

        .btn-edit-value:hover {
            background: #f57c00;
            color: white;
            transform: scale(1.05);
        }

        .btn-delete-value {
            background: #ffebee;
            color: #d32f2f;
        }

        .btn-delete-value:hover {
            background: #d32f2f;
            color: white;
            transform: scale(1.05);
        }

        .values-empty {
            text-align: center;
            padding: 80px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 16px;
            border: 2px dashed #dee2e6;
        }

        .values-empty i {
            font-size: 64px;
            margin-bottom: 20px;
            color: #A89A6A;
            opacity: 0.5;
        }

        .values-empty h3 {
            color: #495057;
            margin-bottom: 12px;
            font-size: 20px;
        }

        .values-empty p {
            color: #6c757d;
            font-size: 14px;
        }
    </style>

    <!-- Slider/Banner Modal -->
    <div id="sliderModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h3 id="sliderModalTitle">üé® Create New Banner</h3>
                <button class="modal-close" onclick="closeSliderModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="sliderForm" onsubmit="handleSliderSubmit(event)">
                    <input type="hidden" id="sliderId" name="sliderId">
                    
                    <!-- Banner Image -->
                    <div class="form-group">
                        <label for="sliderImage">Banner Image (Desktop) *</label>
                        <input type="file" id="sliderImage" name="image" accept="image/*" onchange="previewSliderImage(event, 'sliderImagePreview')" required>
                        <img id="sliderImagePreview" style="max-width: 300px; margin-top: 10px; display: none;">
                    </div>

                    <!-- Mobile Image (Optional) -->
                    <div class="form-group">
                        <label for="sliderMobileImage">Mobile Banner Image (Optional)</label>
                        <input type="file" id="sliderMobileImage" name="mobileImage" accept="image/*" onchange="previewSliderImage(event, 'sliderMobileImagePreview')">
                        <img id="sliderMobileImagePreview" style="max-width: 200px; margin-top: 10px; display: none;">
                    </div>

                    <!-- Title -->
                    <div class="form-group">
                        <label for="sliderTitle">Banner Title *</label>
                        <input type="text" id="sliderTitle" name="title" required placeholder="e.g., Summer Coffee Sale">
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label for="sliderDescription">Description</label>
                        <textarea id="sliderDescription" name="description" rows="2" placeholder="Brief description of the banner"></textarea>
                    </div>

                    <!-- Link/Action -->
                    <div class="form-group">
                        <label for="sliderLink">Link/Action URL</label>
                        <input type="text" id="sliderLink" name="link" placeholder="e.g., /products/summer-blend">
                        <small>Where should users go when they click the banner?</small>
                    </div>

                    <!-- Link Type -->
                    <div class="form-group">
                        <label for="sliderLinkType">Link Type</label>
                        <select id="sliderLinkType" name="linkType">
                            <option value="internal">Internal (App Screen)</option>
                            <option value="external">External (Web URL)</option>
                            <option value="product">Product Detail</option>
                            <option value="category">Category</option>
                        </select>
                    </div>

                    <!-- Display Order -->
                    <div class="form-group">
                        <label for="sliderOrder">Display Order</label>
                        <input type="number" id="sliderOrder" name="displayOrder" value="0" min="0" placeholder="0">
                        <small>Lower numbers appear first</small>
                    </div>

                    <!-- Schedule -->
                    <h4 style="margin-top: 20px; color: #A89A6A;">Schedule (Optional)</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="sliderStartDate">Start Date</label>
                            <input type="datetime-local" id="sliderStartDate" name="startDate">
                        </div>
                        <div class="form-group">
                            <label for="sliderEndDate">End Date</label>
                            <input type="datetime-local" id="sliderEndDate" name="endDate">
                        </div>
                    </div>

                    <!-- Target Audience -->
                    <div class="form-group">
                        <label for="sliderTargetAudience">Target Audience</label>
                        <select id="sliderTargetAudience" name="targetAudience" multiple size="4">
                            <option value="all" selected>All Users</option>
                            <option value="new-customers">New Customers</option>
                            <option value="returning-customers">Returning Customers</option>
                            <option value="loyal-customers">Loyal Customers</option>
                        </select>
                        <small>Hold Ctrl/Cmd to select multiple</small>
                    </div>

                    <!-- Active Status -->
                    <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="sliderIsActive" name="isActive" checked>
                        <label for="sliderIsActive" style="margin: 0;">Active (visible to users)</label>
                    </div>

                    <!-- Submit Button -->
                    <div class="modal-actions" style="margin-top: 25px;">
                        <button type="button" class="btn btn-secondary" onclick="closeSliderModal()">Cancel</button>
                        <button type="submit" id="submitSliderBtn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Create Banner
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Show dev credentials only in development -->
    <script>
        // Only show admin credentials in development environment
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            const devCredentials = document.getElementById('devCredentials');
            if (devCredentials) {
                devCredentials.style.display = 'block';
            }
        }
    </script>
    
    <!-- Subscription Plan Modal -->
    <div id="planModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h3 id="planModalTitle">üìã Create Subscription Plan</h3>
                <button class="modal-close" onclick="closePlanModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="planForm" onsubmit="handlePlanSubmit(event)">
                    <input type="hidden" id="planId">
                    
                    <div class="form-group">
                        <label for="planName">Plan Name *</label>
                        <input type="text" id="planName" class="form-control" required placeholder="e.g., Weekly Premium Coffee">
                    </div>
                    
                    <div class="form-group">
                        <label for="planDescription">Description *</label>
                        <textarea id="planDescription" class="form-control" rows="3" required placeholder="Describe what this subscription plan offers"></textarea>
                    </div>
                    
                    <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div class="form-group">
                            <label for="planDuration">Duration *</label>
                            <select id="planDuration" class="form-control" required>
                                <option value="">Select Duration</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="quarterly">Quarterly</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="planBasePrice">Base Price (AED) *</label>
                            <input type="number" id="planBasePrice" class="form-control" required min="0" step="0.01" placeholder="50.00">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="planDiscount">Discount (%)</label>
                        <input type="number" id="planDiscount" class="form-control" min="0" max="100" step="1" placeholder="10">
                    </div>
                    
                    <div class="form-group">
                        <label for="planProducts">Coffee Products *</label>
                        <select id="planProducts" class="form-control" multiple style="height: 150px;">
                            <!-- Will be populated dynamically -->
                        </select>
                        <small style="color: #666; margin-top: 4px; display: block;">Hold Ctrl/Cmd to select multiple products</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="planBenefits">Plan Benefits (one per line)</label>
                        <textarea id="planBenefits" class="form-control" rows="4" placeholder="Free delivery&#10;Exclusive blends&#10;Priority support"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="planIsActive" checked style="margin-right: 8px;">
                            <span>Active (visible to customers)</span>
                        </label>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closePlanModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Plan
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Brewing Methods Modal -->
    <div id="brewingMethodModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="brewingMethodModalTitle">üçµ Create Brewing Method</h3>
                <button class="modal-close" onclick="brewingMethodsManager.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="brewingMethodForm" onsubmit="brewingMethodsManager.handleSubmit(event)">
                    <input type="hidden" id="brewingMethodId">
                    
                    <!-- Image Upload -->
                    <div class="form-group">
                        <label for="brewingMethodImage">Method Image</label>
                        <input type="file" id="brewingMethodImage" accept="image/*" onchange="brewingMethodsManager.previewImage(event)">
                        <img id="brewingMethodImagePreview" style="max-width: 200px; margin-top: 10px; display: none;">
                        <div id="currentImageContainer" style="margin-top: 10px; display: none;">
                            <p>Current Image:</p>
                            <img id="currentImage" style="max-width: 200px;">
                        </div>
                    </div>
                    
                    <!-- Basic Information -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodNameEn">Name (English) *</label>
                                <input type="text" id="brewingMethodNameEn" class="form-control" required placeholder="e.g., French Press">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodNameAr">Name (Arabic) *</label>
                                <input type="text" id="brewingMethodNameAr" class="form-control" required placeholder="e.g., ÿßŸÑŸÅÿ±ŸÜÿ¥ ÿ®ÿ±ÿ≥">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Description -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodDescEn">Description (English) *</label>
                                <textarea id="brewingMethodDescEn" class="form-control" rows="3" required placeholder="Brief description of the brewing method"></textarea>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodDescAr">Description (Arabic) *</label>
                                <textarea id="brewingMethodDescAr" class="form-control" rows="3" required placeholder="ŸàÿµŸÅ ŸÖÿÆÿ™ÿµÿ± ŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Instructions -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodInstructionsEn">Instructions (English) *</label>
                                <textarea id="brewingMethodInstructionsEn" class="form-control" rows="5" required placeholder="Step-by-step brewing instructions"></textarea>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodInstructionsAr">Instructions (Arabic) *</label>
                                <textarea id="brewingMethodInstructionsAr" class="form-control" rows="5" required placeholder="ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± ÿÆÿ∑Ÿàÿ© ÿ®ÿÆÿ∑Ÿàÿ©"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Parameters -->
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodGrindSize">Grind Size *</label>
                                <select id="brewingMethodGrindSize" class="form-control" required>
                                    <option value="">Select Grind Size</option>
                                    <option value="Extra Fine">Extra Fine</option>
                                    <option value="Fine">Fine</option>
                                    <option value="Medium-Fine">Medium-Fine</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Medium-Coarse">Medium-Coarse</option>
                                    <option value="Coarse">Coarse</option>
                                    <option value="Extra Coarse">Extra Coarse</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodRatio">Coffee:Water Ratio *</label>
                                <input type="text" id="brewingMethodRatio" class="form-control" required placeholder="e.g., 1:15">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodTempC">Water Temp (¬∞C)</label>
                                <input type="number" id="brewingMethodTempC" class="form-control" min="80" max="100" placeholder="e.g., 93">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodBrewTime">Brew Time (min)</label>
                                <input type="number" id="brewingMethodBrewTime" class="form-control" min="1" placeholder="e.g., 4">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Details -->
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodDifficulty">Difficulty *</label>
                                <select id="brewingMethodDifficulty" class="form-control" required>
                                    <option value="">Select Difficulty</option>
                                    <option value="Beginner">Beginner</option>
                                    <option value="Intermediate">Intermediate</option>
                                    <option value="Advanced">Advanced</option>
                                    <option value="Expert">Expert</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodTotalTime">Total Time (min) *</label>
                                <input type="number" id="brewingMethodTotalTime" class="form-control" required min="1" placeholder="e.g., 6">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodServings">Servings</label>
                                <input type="number" id="brewingMethodServings" class="form-control" min="1" value="1" placeholder="e.g., 2">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="brewingMethodOrder">Display Order</label>
                                <input type="number" id="brewingMethodOrder" class="form-control" min="0" value="0" placeholder="0">
                                <small>Lower numbers appear first</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Visual -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodIcon">Icon Class</label>
                                <input type="text" id="brewingMethodIcon" class="form-control" placeholder="e.g., fas fa-coffee">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodColor">Color</label>
                                <input type="color" id="brewingMethodColor" class="form-control" value="#A89A6A">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Categories and Tags -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodCategories">Categories (comma-separated)</label>
                                <input type="text" id="brewingMethodCategories" class="form-control" placeholder="e.g., hot, manual, immersion">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brewingMethodTags">Tags (comma-separated)</label>
                                <input type="text" id="brewingMethodTags" class="form-control" placeholder="e.g., easy, popular, beginner">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Status -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" id="brewingMethodIsActive" checked style="margin-right: 8px;">
                                    <span>Active (visible to users)</span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" id="brewingMethodIsPopular" style="margin-right: 8px;">
                                    <span>Mark as Popular</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="brewingMethodsManager.closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Brewing Method
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Attribute Group Modal -->
    <div id="attributeGroupModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 id="attributeGroupModalTitle">üè∑Ô∏è Create Attribute Group</h3>
                <button class="modal-close" onclick="closeAttributeGroupModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="attributeGroupForm" onsubmit="saveAttributeGroup(event)">
                    <input type="hidden" id="groupEditId" name="id">
                    
                    <!-- Group Name (English) -->
                    <div class="form-group">
                        <label for="groupNameEn">Group Name (English) *</label>
                        <input type="text" id="groupNameEn" name="nameEn" required placeholder="e.g., Origin Countries" oninput="if(!document.getElementById('groupKey').value || !document.getElementById('groupKey').dataset.manuallyEdited) { document.getElementById('groupKey').value = autoGenerateKey(this.value); }">
                    </div>

                    <!-- Group Name (Arabic) -->
                    <div class="form-group">
                        <label for="groupNameAr">Group Name (Arabic) *</label>
                        <input type="text" id="groupNameAr" name="nameAr" required placeholder="ÿ®ŸÑÿØÿßŸÜ ÿßŸÑŸÖŸÜÿ¥ÿ£">
                    </div>

                    <!-- Key (auto-generated) -->
                    <div class="form-group">
                        <label for="groupKey">Key (unique identifier) *</label>
                        <input type="text" id="groupKey" name="key" required placeholder="origin_countries" pattern="[a-z0-9_]+" title="Only lowercase letters, numbers, and underscores" oninput="this.dataset.manuallyEdited = 'true'">
                        <small style="color: #666; font-size: 12px;">Auto-generated from English name. Only lowercase, numbers, and underscores.</small>
                    </div>

                    <!-- Type -->
                    <div class="form-group">
                        <label for="groupType">Type *</label>
                        <select id="groupType" name="type" required>
                            <option value="single-select">Single Select (dropdown)</option>
                            <option value="multi-select">Multi Select (checkboxes)</option>
                            <option value="checkbox-group">Checkbox Group</option>
                            <option value="radio-group">Radio Group</option>
                        </select>
                    </div>

                    <!-- Scope -->
                    <div class="form-group">
                        <label for="groupScope">Scope *</label>
                        <select id="groupScope" name="scope" required>
                            <option value="product-attribute">Product Attribute (show in product form)</option>
                            <option value="filter-only">Filter Only (for customer filtering)</option>
                            <option value="both">Both (product attribute and filter)</option>
                        </select>
                    </div>

                    <!-- Icon and Color Row -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="groupIcon">Icon (emoji or unicode)</label>
                            <input type="text" id="groupIcon" name="icon" placeholder="üåç" maxlength="10">
                        </div>

                        <div class="form-group">
                            <label for="groupColor">Color</label>
                            <input type="color" id="groupColor" name="color" value="#A89A6A">
                        </div>
                    </div>

                    <!-- Display Order and Status Row -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="groupDisplayOrder">Display Order</label>
                            <input type="number" id="groupDisplayOrder" name="displayOrder" value="0" min="0">
                        </div>

                        <div class="form-group">
                            <label style="display: flex; align-items: center; cursor: pointer; margin-top: 30px;">
                                <input type="checkbox" id="groupIsRequired" name="isRequired" style="margin-right: 8px;">
                                <span>Required Field</span>
                            </label>
                        </div>
                    </div>

                    <!-- Active Status -->
                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="groupIsActive" name="isActive" checked style="margin-right: 8px;">
                            <span>Active (visible in product form)</span>
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <div class="modal-actions" style="margin-top: 25px;">
                        <button type="button" class="btn btn-secondary" onclick="closeAttributeGroupModal()">Cancel</button>
                        <button type="submit" id="submitGroupBtn" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Group
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Attribute Value Modal -->
    <div id="attributeValueModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 id="attributeValueModalTitle">‚úèÔ∏è Create Attribute Value</h3>
                <button class="modal-close" onclick="closeAttributeValueModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="attributeValueForm" onsubmit="saveAttributeValue(event)">
                    <input type="hidden" id="valueEditId" name="id">
                    <input type="hidden" id="valueGroupKey" name="groupKey">
                    
                    <!-- Value Name (English) -->
                    <div class="form-group">
                        <label for="valueNameEn">Value Name (English) *</label>
                        <input type="text" id="valueNameEn" name="nameEn" required placeholder="e.g., Ethiopia" oninput="if(!document.getElementById('valueValue').value || !document.getElementById('valueValue').dataset.manuallyEdited) { document.getElementById('valueValue').value = autoGenerateValue(this.value); }">
                    </div>

                    <!-- Value Name (Arabic) -->
                    <div class="form-group">
                        <label for="valueNameAr">Value Name (Arabic) *</label>
                        <input type="text" id="valueNameAr" name="nameAr" required placeholder="ÿ•ÿ´ŸäŸàÿ®Ÿäÿß">
                    </div>

                    <!-- Value (slug) -->
                    <div class="form-group">
                        <label for="valueValue">Value (slug) *</label>
                        <input type="text" id="valueValue" name="value" required placeholder="ethiopia" pattern="[a-z0-9_-]+" title="Only lowercase letters, numbers, hyphens, and underscores" oninput="this.dataset.manuallyEdited = 'true'">
                        <small style="color: #666; font-size: 12px;">Auto-generated from English name. Used for filtering and URLs.</small>
                    </div>

                    <!-- Description (English) -->
                    <div class="form-group">
                        <label for="valueDescEn">Description (English)</label>
                        <textarea id="valueDescEn" name="descriptionEn" rows="2" placeholder="Optional description for this value"></textarea>
                    </div>

                    <!-- Description (Arabic) -->
                    <div class="form-group">
                        <label for="valueDescAr">Description (Arabic)</label>
                        <textarea id="valueDescAr" name="descriptionAr" rows="2" placeholder="ŸàÿµŸÅ ÿßÿÆÿ™Ÿäÿßÿ±Ÿä ŸÑŸáÿ∞Ÿá ÿßŸÑŸÇŸäŸÖÿ©"></textarea>
                    </div>

                    <!-- Parent Value -->
                    <div class="form-group">
                        <label for="valueParent">Parent Value (for hierarchical structure)</label>
                        <select id="valueParent" name="parent">
                            <option value="">-- No Parent (Top Level) --</option>
                            <!-- Options will be loaded dynamically -->
                        </select>
                        <small style="color: #666; font-size: 12px;">Optional: Create hierarchical relationships (e.g., East Africa ‚Üí Ethiopia)</small>
                    </div>

                    <!-- Icon and Color Row -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="valueIcon">Icon (emoji or unicode)</label>
                            <input type="text" id="valueIcon" name="icon" placeholder="üá™üáπ" maxlength="10">
                        </div>

                        <div class="form-group">
                            <label for="valueColor">Color</label>
                            <input type="color" id="valueColor" name="color" value="#8B7355">
                        </div>
                    </div>

                    <!-- Display Order -->
                    <div class="form-group">
                        <label for="valueDisplayOrder">Display Order</label>
                        <input type="number" id="valueDisplayOrder" name="displayOrder" value="0" min="0">
                    </div>

                    <!-- Active Status -->
                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="valueIsActive" name="isActive" checked style="margin-right: 8px;">
                            <span>Active (visible in product form)</span>
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <div class="modal-actions" style="margin-top: 25px;">
                        <button type="button" class="btn btn-secondary" onclick="closeAttributeValueModal()">Cancel</button>
                        <button type="submit" id="submitValueBtn" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Value
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- JavaScript Files -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/utils.js?v=2025101808"></script>
    <script src="js/admin.js?v=2025101808"></script>
    <script src="js/dashboard.js?v=2025101808"></script>
    <script src="js/products.js?v=2025103001"></script>
    <script src="js/attributes.js?v=2025103004"></script>
    <script src="js/orders.js?v=2025101808"></script>
    <script src="js/users.js?v=2025101808"></script>
    <script src="js/firebase.js?v=2025101808"></script>
    <script src="js/sliders.js?v=2025101808"></script>
    <script src="js/brewing-methods.js?v=2025101808"></script>
    <script src="js/accessories.js?v=2025101808"></script>
    <script src="js/gift-sets.js?v=2025102701"></script>
    <script src="js/banner-tracking.js?v=2025101808"></script>
    <script src="js/reviews.js?v=2025101808"></script>
    <script src="js/loyalty.js?v=2025101808"></script>
    <script src="js/referrals.js?v=2025101808"></script>
    <script src="js/subscriptions.js?v=2025101808"></script>
    <script src="js/settings.js?v=2025101808"></script>
    <script src="js/contact-inquiries.js?v=2025101808"></script>
    <script src="js/newsletters.js?v=2025101808"></script>
    <script src="js/support-tickets.js?v=2025101808"></script>
    <script src="js/feedback.js?v=2025101808"></script>
    
</body>
</html>
